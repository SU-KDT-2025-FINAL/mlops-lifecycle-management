# 시장 조사: 자동 모델 재훈련 트리거

## 1. 요약 (TL;DR)

이 연구는 자동 모델 재훈련을 트리거하는 산업 표준과 기술적 최적의 방법을 조사합니다. 특히, 어떤 임계값과 반복 패턴이 사용되는지에 초점을 맞춥니다.

주요 발견은 **모델 재훈련에 대한 보편적인, 하나의 숫자가 모든 경우에 맞는 것은 없다는 것입니다.** 최적의 전략은 특정 비즈니스 문제, 모델의 영향, 데이터 특성, 및 재훈련 비용 대비 모델 퇴화 비용에 기반하여 매우 상황에 따라 다릅니다.

단 하나의 마술 숫자에 의존하는 것이 아니라, 다수의 지표를 추적하고 조합된 트리거를 사용하는 강력한 모니터링 시스템을 구현하는 것이 산업 최고의 방법입니다. 두 가지 주요 접근 방식은 다음과 같습니다.

1.  **성능 퇴화 (지체 지표):** 주요 비즈니스 또는 모델 지표 (예: 정확도, F1-점수, AUC)가 미리 정의된 기준선 아래로 떨어질 때 재훈련을 트리거합니다. 이는 반응적인 접근 방식입니다.
2.  **데이터 및 개념漂이 (선도 지표):** 생생한 라이브 데이터의 통계적 속성이 훈련 데이터와 상당히 다르면 재훈련을 예측적으로 트리거합니다. 이는 더 발전된이고 추천되는 접근 방식으로, 성능 퇴화가 발생하기 전에 예측할 수 있습니다.

트리거의 "반복" 또는 "지속" 측면은 무작위 노이즈에 대한 재훈련을 방지하고 안정성을 보장하는 메커니즘입니다. 이는 일반적으로 트리거 조건이 연속된 시간 창 또는 일정한 수의 예측에 걸쳐 충족되도록 처리됩니다.

## 2. 주요 개념: 모델이 재훈련이 필요한 이유는 무엇입니까?

모델의 성능은 시간이 지나면서 반드시 퇴화합니다. 이러한 현상, 즉 **모델 퇴화** 또는 **모델漂이**,는 주로 두 가지 요인에 의해 발생합니다:

-   **데이터漂이:** 입력 특성의 통계적 속성이 시간이 지나면서 변경됩니다. 예를 들어, 전염병 이전에 훈련된 사기 감지 모델은 오늘날 완전히 다른 사용자 거래 패턴의 분포를 보게 됩니다. 이는 재훈련이 필요한 가장 일반적인 이유입니다.
-   **개념漂이:** 입력 특성과 목표 변수 간의 관계가 변경됩니다. 예를 들어, 추천 시스템에서 한 번은 인기가 있었지만 (긍정 레이블) 외부 이벤트로 인해 사용자가 선호하는 것이 바뀌어, 기본적으로 무엇이 사용자가 선호하는지에 대한 개념이 변경됩니다.

## 3. 일반적인 재훈련 트리거 전략

### A. 성능 퇴화에 대한 트리거

이 접근 방식은 가장 직접적이고 사용자의 질문과 직접적으로 관련이 있습니다. 라이브 데이터에 대한 모델의 성능을 모니터링하고, 허용할 수 있는 수준 이하로 떨어질 때 재훈련을 트리거합니다.

-   **작동 방식:**
    1.  **기준선 설정:** 훈련 중에 모델의 성능이 검증 세트 또는 유효성 검사 세트에서 얻어진 것이 초기 기준선이 됩니다 (예: 92%의 정확도).
    2.  **임계값 설정:** 허용할 수 있는 성능 하락의 임계값이 정의됩니다. 이는 산업 전반에 걸쳐 고정된 숫자가 아니지만, 일반적으로 **상대 백분율 하락 (예: 기준선에서 5% 또는 10% 하락)** 또는 **평균 성능에서 일정한 표준 편차 하락**입니다.
    3.  **모니터링 및 트리거:** 시스템은 최근 예측의 슬라이딩 창에서 지속적으로 지표를 계산하고, 임계값을 초과하면 재훈련을 트리거합니다.

-   **제한 사항:** 이는 *지체 지표*입니다. 모델이 이미 최적이 아닌 예측을 하고 있을 때, 즉 비즈니스에 이미 영향을 미쳤을 때에야 문제가 있음을 알게 됩니다. 실시간으로 지표를 얻는 것도 느리거나 비용이 들 수 있습니다.

### B. 데이터漂이에 대한 트리거 (예측 접근 방식)

이 접근 방식은 더 정교하고 선호되는 전략입니다. 성능이 떨어질 때까지 기다리는 것이 아니라, 입력 데이터 또는 모델 예측의 통계적 분포에 대한 변경을 모니터링합니다.

-   **작동 방식:** 시스템은 라이브 데이터의 통계적 분포를 기준선 (일반적으로 훈련 데이터)과 비교합니다.
-   **일반적인 지표 및 임계값:**
    -   **인구 안정성 지수 (PSI):** 두 인구 간의 분포 이동을 측정하는 널리 사용되는 지표입니다. 정확한 임계값은 사용 사례에 따라 다르지만, 일반적인 규칙은 다음과 같습니다:
        -   **PSI < 0.1:** 유의할만한 변화가 없음.
        -   **0.1 <= PSI < 0.25:** 소규모 변화, 조사가 필요.
        -   **PSI >= 0.25:** 주요 변화, 모델 재훈련이 추천.
        > **참고:** 이 임계값은 MLOps 블로그 및 도구 문서에서 표준 지침으로 인용됩니다. 예를 들어, "자동 재훈련을 받아들이는" 기사는 PSI 0.25를 트리거 점으로 사용하는 것을 언급합니다.
        > [자동 재훈련을 받아들이는 - Towards Data Science](https://medium.com/data-science/embracing-automated-retraining-780ed49f9985)
    -   **콜모고로프-스미르노프 (K-S) 검정:** 두 샘플이 같은 분포에서 왔는지 여부를 결정하는 통계적 검정입니다. 낮은 p-값 (예: < 0.05)은 유의할만한漂이를 나타냅니다.

## 4. "지속" 정의: 얼마나 "반복"되는가?

소규모, 임시적인 변동에 대한 재훈련 작업을 트리거하는 것은 비효율적입니다. "반복" 또는 "지속" 논리는 실제로 의미 있는 변경에만 재훈련이 발생하도록 합니다.

이것에 대한 단일 표준은 없으며, 데이터 속도 및 비즈니스 문맥에 따라 다릅니다. 일반적인 접근 방식은 다음과 같습니다:

1.  **시간 기반 창:** 트리거 조건 (예: 정확도 < 85%)이 연속된 기간 동안 참이어야 합니다.
    -   *예:* "기준선보다 5% 낮은 평균 정확도가 **마지막 24 시간** 동안 지속되면 재훈련을 트리거."
2.  **카운트 기반 창:** 조건이 연속된 예측 또는 배치의 일정한 수에 걸쳐 충족되어야 합니다.
    -   *예:* "**마지막 5 데이터 배치 중 3**에서 데이터漂이 (PSI > 0.25)가 감지되면 재훈련을 트리거."
3.  **볼륨 기반 트리거:** 새로운 데이터의 충분한 볼륨이 마지막 훈련 실행 이후로 수집되면 모델이 새로운 데이터에 과적합하는 것을 방지합니다.

## 5. 시스템에 대한 추천 프레임워크

보편적인 숫자를 찾는 것이 아니라, 특정 사용 사례에 맞는 임계값을 결정하는 프레임워크를 구축하는 것이 가장 좋습니다.

1.  **강력한 기준선 설정:** 모델을 훈련한 후, 검증 세트에서 철저하게 평가합니다. 이는 벤치마크입니다. 정확도, 정밀도, 재현율, F1-점수, 입력 특성의 분포와 같은 지표를 로그합니다.
2.  **선도 지표 (漂이) 시작:** 입력 특성에 대한 데이터漂이 모니터링을 구현합니다. PSI를 사용하여 시작하고, 표준 임계값인 **0.25**를 "챌린저" 모델을 훈련하는 트리거로 사용합니다.
3.  **성능을 후방 지표로 사용:** 성능 모니터링을 안전망으로 구현합니다. 보수적인 임계값, 예를 들어 기준선 정확도에서 **5-10%의 상대 하락**,으로 시작합니다.
4.  **지속 논리 정의:** 예측 볼륨에 기반하여 창을 선택합니다. 시간당 수천 개의 예측을 받는 경우, 1시간 창이 충분할 수 있습니다. 예측이 적은 경우, 24시간 또는 1000예측 창이 더 적절할 수 있습니다.
5.  **챔피언-챌린저 배포 구현:** 트리거가 발생하면, 즉시 생산 모델을 대체하지 않습니다.
    -   **챔피언:** 현재 생산 모델.
    -   **챌린저:** 새로 훈련된 모델.
    -   최근 데이터의 일부에 대한 챌린저를 챔피언과 비교하여 평가합니다. 챌린저가 통계적으로 유의미한 성능 향상을 보여주는 경우에만 생산으로 승격합니다.
6.  **모니터링, 로깅, 반복:** 모든 재훈련 이벤트와 트리거 이유를 로그합니다. 시간이 지나면서, 특정 문맥에서漂이가 성능에 미치는 영향을 데이터를 통해 알게 되고, 임계값을 조정할 수 있습니다.

## 6. 결론

자동 재훈련에 대한 현대의 MLOps 접근 방식은 고정된 숫자를 찾는 것이 아니라, 다층적인 모니터링 시스템을 구축하는 것입니다. 프로젝트에 가장 강력한 시작점은 다음과 같습니다:

1.  **데이터漂이 감지 (예: PSI > 0.25)를 주요, 예측적인 트리거로 우선시합니다.**
2.  **성능 퇴화 (예: 정확도 5% 하락)를 보조, 반응적인 트리거로 사용합니다.**
3.  **지속 창 (예: 12/24시간 또는 N 배치 동안 지속)을 구현하여 잘못된 경보를 방지합니다.**
4.  **챔피언-챌린저 모델을 사용하여 새로운 모델이 실제로 가치를 추가하는지 확인합니다.**

## 7. 참고 문헌

-   [ML 모델 모니터링 및 재훈련: 언제, 어떻게?](https://medium.com/@jwang.ml/ml-model-monitoring-and-re-training-when-and-how-7fbfe3b64433)
-   [자동 재훈련을 받아들이는 (PSI 임계값 출처)](https://medium.com/data-science/embracing-automated-retraining-780ed49f9985)
-   [MLOps에서 모델 재훈련 마스터링](https://randomtrees.medium.com/mastering-model-retraining-in-mlops-4bb961ee7070)
-   [AWS Well-Architected: 모델 성능 퇴화 모니터링, 감지, 처리](https://docs.aws.amazon.com/wellarchitected/latest/machine-learning-lens/mlper-15.html) 